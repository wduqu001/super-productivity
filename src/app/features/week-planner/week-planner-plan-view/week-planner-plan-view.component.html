<div class="days">
  @for (day of days$|async; track day.dayDate) {
  <div class="day">
    <div class="day-title">
      {{ day.dayDate|date:'EEE' }} <span class="date">{{ day.dayDate|date:'d.M.' }}</span>
    </div>
    <div class="day-estimate">{{ day.timeEstimate }}h / {{ day.timeLimit }}h</div>

    <div class="normal-tasks">
      <!--      <div class="section-title">-->
      <!--        <div>regular</div>-->
      <!--        &lt;!&ndash;        <div class="estimate">3h</div>&ndash;&gt;-->
      <!--      </div>-->

      <div
        class="normal-tasks-items"
        cdkDropList
        [cdkDropListData]="day.tasks"
        (cdkDropListDropped)="drop('TODO',$event)"
      >
        @for (task of day.tasks; track task.id) {
        <week-planner-task
          cdkDrag
          [task]="task"
        ></week-planner-task>
        }
      </div>

      <div style="text-align: center">
        <button mat-button>
          <mat-icon>add</mat-icon>
          Add new
        </button>
      </div>
    </div>

    <div class="scheduled">
      <div class="section-title">
        <mat-icon>alarm</mat-icon>
      </div>

      <div
        class="scheduled-items"
        cdkDropList
        [cdkDropListData]="day.scheduledIItems"
        (cdkDropListDropped)="drop('SCHEDULED',$event)"
      >
        @for (scheduledItem of day.scheduledIItems; track scheduledItem.id) {
        <div class="scheduled-item">
          @switch (scheduledItem.type) { @case ('TASK') {
          <week-planner-task
            cdkDrag
            [task]="scheduledItem.task"
          ></week-planner-task>
          } @case ('event') {
          <div
            class="event"
            cdkDrag
          >
            {{ scheduledItem.id }}
          </div>
          } @default {
          <div
            class="default"
            cdkDrag
          >
            {{ scheduledItem.id }}
          </div>
          } }
        </div>
        }
      </div>
    </div>
  </div>
  }
</div>
